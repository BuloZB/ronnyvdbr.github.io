sudo sed -i 's/deb http:\/\/mirrordirector.raspbian.org\/raspbian wheezy main firmware/deb http:\/\/archive.raspbian.org\/raspbian wheezy main contrib non-free/g' /etc/apt/sources.list
apt-get update
sudo apt-get install debhelper libcurl4-gnutls-dev
sudo apt-get install mysql-server freeradius freeradius-mysql

echo “create database radius;” | mysql –u root –p
mysql -u root -p radius < /etc/freeradius/sql/mysql/schema.sql
mysql -u root -p radius < /etc/freeradius/sql/mysql/admin.sql
echo "insert into radcheck (username, attribute, op, value) values ('user', 'Cleartext-Password', ':=', 'password');" | mysql -u root -p radius

sudo sed -i 's/#       $INCLUDE sql.conf/$INCLUDE sql.conf/g' /etc/freeradius/radiusd.conf

wget http://ap.coova.org/chilli/coova-chilli-1.3.0.tar.gz
tar -zxvf ~/coova-chilli-1.3.0.tar.gz
cd ~/coova-chilli-1.3.0
echo "/usr/local/lib" | tee --append /etc/ld.conf
ldconfig
useradd chilli
cp /usr/local/etc/chilli/defaults /usr/local/etc/chilli/config
sed -i 's/# HS_WANIF=eth0/HS_WANIF=eth0/g' /usr/local/etc/chilli/config
sed -i 's/HS_LANIF=eth1/HS_LANIF=wlan0/g' /usr/local/etc/chilli/config
/usr/local/etc/init.d/chilli stop

mkdir /usr/local/var
ln -s /var/run /usr/local/var/run

As /usr/local/var/run path did not exist, I created the /usr/local/var directory and then added a symlink dir called 'run' there, that links to /var/run
